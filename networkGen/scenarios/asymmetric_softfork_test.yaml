# Asymmetric Soft Fork Feature Test
#
# Purpose: Verify asymmetric block propagation (accepts_foreign_blocks).
#
# Model: v27 = strict new rules (rejects v26 blocks)
#        v26 = permissive old rules (accepts v27 blocks as valid)
#
# Hashrate: v26 majority (~65%), v27 minority (~35%)
#   - v27 faction (committed):  Foundry USA + Luxor + OCEAN  = 32.25%
#   - v26 faction (committed):  AntPool + ViaBTC + F2Pool + MARA = 50.14%
#   - Neutral (~16%): will follow v26 (dominant hashrate), effective split ~34/66
#
# Expected observations:
#   1. v27 blocks are accepted by v26 nodes (submitblock returns null/success)
#   2. v27 blocks are stored in v26 nodes' block DB (retrievable via getblock)
#   3. v26 nodes stay on their own heavier chain (more cumulative work)
#   4. v27 nodes never see v26 blocks (v26 chain hashes unknown to v27)
#   5. v26 chain height > v27 chain height throughout (65% vs 35% hashrate)
#
# This test is intentionally small (1 economic + 2 user nodes per partition)
# for fast deployment and clear signal isolation.

name: "asymmetric-softfork-test"
description: "Feature verification for asymmetric block propagation. v26 majority hashrate with strong factions."

# Economic split: v26-dominant, reflecting its hashrate advantage
v27_economic_pct: 40
v27_hashrate_pct: 35

# Small node count for fast feature verification
economic_nodes_per_partition: 1
user_nodes_per_partition: 2

# v27 economic node: committed minority
v27_economic:
  role: "major_exchange"
  fork_preference: "v27"
  ideology_strength: 0.6
  switching_threshold: 0.12
  inertia: 0.15
  activity_type: "transactional"
  transaction_velocity: 0.8

# v26 economic node: dominant position, committed
v26_economic:
  role: "major_exchange"
  fork_preference: "v26"
  ideology_strength: 0.6
  switching_threshold: 0.12
  inertia: 0.15
  activity_type: "transactional"
  transaction_velocity: 0.8

# User nodes: ideologically neutral observers
user_config:
  fork_preference: "neutral"
  ideology_strength: 0.2
  switching_threshold: 0.10
  inertia: 0.05
  activity_type: "mixed"
  transaction_velocity: 0.3

# Pool ideology overrides
# v27 faction (~32% hashrate): strongly committed, will absorb significant losses
pool_overrides:
  - pool_name: "Foundry USA"
    fork_preference: "v27"
    ideology_strength: 0.9
    profitability_threshold: 0.25
    max_loss_pct: 0.40

  - pool_name: "Luxor"
    fork_preference: "v27"
    ideology_strength: 0.8
    profitability_threshold: 0.20
    max_loss_pct: 0.30

  - pool_name: "OCEAN"
    fork_preference: "v27"
    ideology_strength: 0.85
    profitability_threshold: 0.22
    max_loss_pct: 0.35

  # v26 faction (~50% hashrate): dominant, ideologically committed
  - pool_name: "AntPool"
    fork_preference: "v26"
    ideology_strength: 0.9
    profitability_threshold: 0.25
    max_loss_pct: 0.40

  - pool_name: "ViaBTC"
    fork_preference: "v26"
    ideology_strength: 0.85
    profitability_threshold: 0.22
    max_loss_pct: 0.35

  - pool_name: "F2Pool"
    fork_preference: "v26"
    ideology_strength: 0.8
    profitability_threshold: 0.20
    max_loss_pct: 0.30

  - pool_name: "MARA Pool"
    fork_preference: "v26"
    ideology_strength: 0.7
    profitability_threshold: 0.15
    max_loss_pct: 0.25

  # Neutral (~16% hashrate): purely rational, will follow v26 for profit
  - pool_name: "Binance Pool"
    fork_preference: "neutral"
    ideology_strength: 0.0
    profitability_threshold: 0.01
    max_loss_pct: 0.0

  - pool_name: "SBI Crypto"
    fork_preference: "neutral"
    ideology_strength: 0.0
    profitability_threshold: 0.02
    max_loss_pct: 0.0

  - pool_name: "Braiins Pool"
    fork_preference: "neutral"
    ideology_strength: 0.1
    profitability_threshold: 0.05
    max_loss_pct: 0.02

partition_mode: "static"
fork_observer_enabled: false
